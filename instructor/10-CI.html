<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Testing and Continuous Integration: Continuous Integration with GitHub Actions</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png"><link rel="manifest" href="../favicons/incubator/site.webmanifest"><link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <a href="https://www.york.ac.uk" class="external-link">
          <img alt="University of York" src="../assets/images/UOY-Logo-Stacked-shield-Black.svg" class="light-only"><img alt="University of York" src="../assets/images/UOY-Logo-Stacked-shield-White.svg" class="dark-only"></a>

        <span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>


      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../10-CI.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Testing and Continuous Integration
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Testing and Continuous Integration
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Testing and Continuous Integration
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 73%" class="percentage">
    73%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 73%" aria-valuenow="73" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../10-CI.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-introduction.html">1. Introduction</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-why-test-my-code.html">2. Why Test My Code?</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-simple-tests.html">3. Simple Tests</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-interacting-with-tests.html">4. Interacting with Tests</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-unit-tests-best-practices.html">5. Unit tests &amp; Testing Practices</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="05-testing-exceptions.html">6. Testing for Exceptions</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="06-floating-point-data.html">7. Floating Point Data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="07-fixtures.html">8. Fixtures</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="08-parametrization.html">9. Parametrization</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="09-testing-output-files.html">10. Regression Tests</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        11. Continuous Integration with GitHub Actions
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#continuous-integration">Continuous Integration</a></li>
<li><a href="#setting-up-your-project-repository">Setting up your project repository</a></li>
<li><a href="#creating-a-github-action">Creating a GitHub Action</a></li>
<li><a href="#upload-the-workflow-to-github">Upload the workflow to GitHub</a></li>
<li><a href="#testing-across-multiple-platforms">Testing across multiple platforms</a></li>
<li><a href="#running-on-other-events">Running on other events</a></li>
<li><a href="#keypoints">Keypoints</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/09-testing-output-files.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/09-testing-output-files.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Regression Tests
        </a>
        <a class="chapter-link float-end" href="../instructor/index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Continuous Integration with GitHub Actions</h1>
        <p>Last updated on 2026-02-17 |

        <a href="https://github.com/ResearchCodingClub/python-testing-for-research/edit/main/episodes/10-CI.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 45 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can I automate the testing of my code?</li>
<li>What are GitHub Actions?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Understand the concept of continuous integration</li>
<li>Learn how to use GitHub Actions to automate the testing of your
code</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="continuous-integration">Continuous Integration<a class="anchor" aria-label="anchor" href="#continuous-integration"></a></h2>
<hr class="half-width"><p>Continuous Integration (CI) is the practice of automating the merging
of code changes into a project. In the context of software testing, CI
is the practice of running tests on every code change to ensure that the
code is working as expected. GitHub provides a feature called GitHub
Actions that allows you to integrate this into your projects.</p>
<p>In this lesson we will go over the basics of how to set up a GitHub
Action to run tests on your code.</p>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<span class="callout-header">Prerequisite</span>
<div class="callout-inner">
<div class="callout-content">
<p>This lesson assumes a working knowledge of Git and GitHub. If you get
stuck, you may find it helpful to review the Research Coding Course’s <a href="https://researchcodingclub.github.io/course/#version-control-introduction-to-git-and-github" class="external-link">material
on version control</a></p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="setting-up-your-project-repository">Setting up your project repository<a class="anchor" aria-label="anchor" href="#setting-up-your-project-repository"></a></h2>
<hr class="half-width"><ul><li>Create a new repository on GitHub for this lesson called
“python-testing-course” (whatever you like really). We recommended
making it public for now.</li>
<li>Clone the repository into your local machine using
<code>git clone   &lt;repository-url&gt;</code> or via Github
Desktop.</li>
<li>Move over all your code from the previous lessons into this
repository.</li>
<li>Commit the changes using <code>git add .</code> and
<code>git commit -m "Add all the project code"</code>
</li>
<li>Create a new file called <code>requirements.txt</code> in the root
of your repository and add the following contents:</li>
</ul><pre><code><span><span class="va">pytest</span></span>
<span><span class="va">numpy</span></span>
<span><span class="va">snaptol</span></span></code></pre>
<p>This is just a list of all the packages that your project uses and
will be needed later. Recall that each of these are used in various
lessons in this course.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Nowadays it is usually preferable to list dependencies in a file
called <code>pyproject.toml</code>, which also allows Python packages to
be installed and published. Look out for our upcoming course on
reproducible environments to learn more!</p>
</div>
</div>
</div>
<p>Now we have a repository with all our code in it online on
GitHub.</p>
</section><section><h2 class="section-heading" id="creating-a-github-action">Creating a GitHub Action<a class="anchor" aria-label="anchor" href="#creating-a-github-action"></a></h2>
<hr class="half-width"><p>GitHub Actions are defined in <code>yaml</code> files – a structured
text file which is commonly used to pass settings to programs. They are
stored in the <code>.github/workflows</code> directory in your
repository.</p>
<ul><li>Create a new directory in your repository called
<code>.github</code>
</li>
<li>Inside the <code>.github</code> directory, create a new directory
called <code>workflows</code>
</li>
<li>Inside the <code>workflows</code> directory, create a new file
called <code>tests.yaml</code>
</li>
</ul><p>This <code>test.yaml</code> file is where you will tell GitHub how to
run the tests for your code.</p>
<p>Let’s add some instructions to the <code>tests.yaml</code> file:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># This is just the name of the action, you can call it whatever you like.</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Tests (pytest)</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># This sets the events that trigger the action. In this case, we are telling</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># GitHub to run the tests whenever a push is made to the repository.</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co"># The trailing colon is intentional!</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co"># This is a list of jobs that the action will run. In this case, we have only</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co"># one job called test.</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">  # This is the name of the job </span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">    # This is the environment that the job will run on. In this case, we are</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co">    # using the latest version of Ubuntu, however you can use other operating</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">    # systems like Windows or MacOS if you like!</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">    # This is a list of steps that the job will run. Each step is a command</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">    # that will be executed on the environment.</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co">      # This command tells GitHub to use a pre-built action. In this case, we</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="co">      # are using the actions/checkout action to check out the repository. This</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="co">      # just means that GitHub will clone this repository to the current</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="co">      # working directory.</span></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v6</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a><span class="co">      # This is the name of the step. This is just a label that will be</span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a><span class="co">      # displayed in the GitHub UI.</span></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Set up Python 3.12</span></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a><span class="co">        # This command tells GitHub to use a pre-built action. In this case, we</span></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a><span class="co">        # are using the actions/setup-python action to set up Python 3.12.</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v6</span></span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a><span class="at">            </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.12"</span></span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a><span class="co">      # This step installs the dependencies for the project such as pytest,</span></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a><span class="co">      # numpy, pandas, etc using the requirements.txt file we created earlier.</span></span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install dependencies</span></span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a><span class="fu">        run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a>          python -m pip install --upgrade pip</span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a>          pip install -r requirements.txt</span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a><span class="co">      # This step runs the tests using the pytest command. </span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests</span></span>
<span id="cb2-50"><a href="#cb2-50" tabindex="-1"></a><span class="fu">        run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb2-51"><a href="#cb2-51" tabindex="-1"></a>          pytest</span></code></pre>
</div>
<p>This is a simple GitHub Action that runs the tests for your code
whenever code is pushed to the repository, regardless of what was
changed in the repository or which branch you push too. We’ll see later
how to run tests only when certain criteria are fulfilled.</p>
</section><section><h2 class="section-heading" id="upload-the-workflow-to-github">Upload the workflow to GitHub<a class="anchor" aria-label="anchor" href="#upload-the-workflow-to-github"></a></h2>
<hr class="half-width"><p>Now that you have created the <code>tests.yaml</code> file, you need
to upload it to GitHub.</p>
<ul><li>Commit the changes using <code>git add .</code> and
<code>git commit -m "Add GitHub Action to run tests"</code>
</li>
<li>Push the changes to GitHub using <code>git push</code>
</li>
</ul><p>This should trigger a workflow on the repository. While it’s running,
you’ll see an orange circle next to your profile name at the top of the
repo. When it’s done, it’ll change to a green tick if it finished
successfully, or a red cross if it didn’t.</p>
<figure><img src="../fig/github_repo_view.png" alt="GitHub repository view with a green tick indicating a successful workflow run" class="figure mx-auto d-block"><div class="figcaption">GitHub repository view with a green tick
indicating a successful workflow run</div>
</figure><p>You can view all previous workflow runs by clicking the ‘Actions’
button on the top bar of your repository.</p>
<figure><img src="../fig/github_actions_button.png" alt="GitHub Actions Button" class="figure mx-auto d-block"><div class="figcaption">GitHub Actions button</div>
</figure><p>If you click on the orange circle/green tick/red cross, you can also
view the individual stages of the workflow and inspect the terminal
output.</p>
<figure><img src="../fig/github_action.png" alt="Detailed view of a GitHub workflow run" class="figure mx-auto d-block"><div class="figcaption">Detailed view of a GitHub workflow run</div>
</figure></section><section><h2 class="section-heading" id="testing-across-multiple-platforms">Testing across multiple platforms<a class="anchor" aria-label="anchor" href="#testing-across-multiple-platforms"></a></h2>
<hr class="half-width"><p>A very useful feature of GitHub Actions is the ability to test over a
wider range of platforms than just your own machine:</p>
<ul><li>Operating systems</li>
<li>Python versions</li>
<li>Compiler versions (for those writing C/C++/Fortran/etc)</li>
</ul><p>We can achieve this by setting
<code>jobs.&lt;job_id&gt;.strategy.matrix</code> in our workflow:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="at">  </span><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">    </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">      </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">        </span><span class="fu">python_version</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"3.12"</span><span class="kw">,</span><span class="at"> </span><span class="st">"3.13"</span><span class="kw">,</span><span class="at"> </span><span class="st">"3.14"</span><span class="kw">]</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="at">        </span><span class="fu">os</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"ubuntu-latest"</span><span class="kw">,</span><span class="at"> </span><span class="st">"windows-latest"</span><span class="kw">]</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ${{ matrix.os }}</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="at">      ...</span></span></code></pre>
</div>
<p>Later in the file, the <code>setup-python</code> step should be
changed to:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Set up Python ${{ matrix.python_version }}</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v6</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">            </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> ${{ matrix.python_version }}</span></span></code></pre>
</div>
<p>By default, all combinations in the matrix will be run in separate
jobs. The syntax <code>${{ matrix.x }}</code> inserts the text from the
<code>x</code> list for the given matrix job.</p>
<div id="upgrade-the-workflow-to-run-across-multiple-platforms" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="upgrade-the-workflow-to-run-across-multiple-platforms" class="callout-inner">
<h3 class="callout-title">Upgrade the workflow to run across multiple
platforms</h3>
<div class="callout-content">
<ul><li>Make the changes above to your workflow file, being careful to get
the indentation right!</li>
<li>Commit the changes and push to GitHub.</li>
<li>Check the latest jobs in the Actions panel.</li>
</ul></div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>You should see that a total of 6 jobs have run, and hopefully all
will have passed!</p>
<figure><img src="../fig/matrix_tests.png" alt="Completed matrix tests." class="figure mx-auto d-block"><div class="figcaption">Image showing completed matrix jobs.</div>
</figure></div>
</div>
</div>
</div>
<p>This ensures that code that runs on your machine should, in theory,
run on many other peoples’ machines too. However, it’s best to restrict
the matrix to the minimum number of necessary platforms to ensure you
don’t waste resources. You can do so with a list of exclusions:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="at">    </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">      </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">        </span><span class="fu">python_version</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"3.12"</span><span class="kw">,</span><span class="at"> </span><span class="st">"3.13"</span><span class="kw">,</span><span class="at"> </span><span class="st">"3.14"</span><span class="kw">]</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">        </span><span class="fu">os</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"ubuntu-latest"</span><span class="kw">,</span><span class="at"> </span><span class="st">"windows-latest"</span><span class="kw">]</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">        # Only run windows on latest Python version</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="at">        </span><span class="fu">exclude</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> </span><span class="fu">os</span><span class="kw">:</span><span class="at"> </span><span class="st">"windows-latest"</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="at">            </span><span class="fu">python_version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.12"</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> </span><span class="fu">os</span><span class="kw">:</span><span class="at"> </span><span class="st">"windows-latest"</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="at">            </span><span class="fu">python_version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.13"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="running-on-other-events">Running on other events<a class="anchor" aria-label="anchor" href="#running-on-other-events"></a></h2>
<hr class="half-width"><p>You may have wondered why there is a trailing colon when we specify
<code>push:</code> at the top of the file. The reason is that we can
optionally set additional conditions on when CI jobs will run. For
example:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">    # Only check when Python files are changed.</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">    # Don't need to check when the README is updated!</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="at">    </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'**.py'</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'pyproject.toml'</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">    # Only check when somebody raises a push to main.</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">    # (not recommended in general!)</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span></code></pre>
</div>
<p>Doing this can prevent pointless CI jobs from running and save
resources.</p>
<p>You can also run on events other than a push. For example:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="at">    </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'**.py'</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'pyproject.toml'</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">  # Run on code in pull requests.</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="at">    </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'**.py'</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">'pyproject.toml'</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">  # This allows you to launch the job manually</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="at">  </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span></code></pre>
</div>
<p>There is an important subtlety to running on
<code>pull_request</code> versus <code>push</code>:</p>
<ul><li>
<code>push</code> runs directly on the commits you push to
GitHub.</li>
<li>
<code>pull_request</code> runs on the code that would result
<em>after</em> the pull request has been merged into its target
branch.</li>
</ul><p>In collaborative coding projects, it is entirely possible that
<code>main</code> will have diverged from your branch while you were
working on it, and tests that pass on your branch will fail after the
merge. For this reason, it’s recommended to always include both
<code>push</code> and <code>pull_request</code> in your testing
workflows.</p>
<div id="running-on-pull-requests-advanced" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="running-on-pull-requests-advanced" class="callout-inner">
<h3 class="callout-title">Running on pull requests (advanced)</h3>
<div class="callout-content">
<p>Can you engineer a situation where a CI job passes on
<code>push</code> but fails on <code>pull_request</code>?</p>
<ul><li>Write a function to a new file, commit the changes, and push it to
your <code>main</code> branch. It can be something as simple as:</li>
</ul><div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># file: message.py</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="kw">def</span> message():</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">"foo"</span></span></code></pre>
</div>
<ul><li>Switch to a new branch <code>my_branch</code> with
<code>git switch -c my_branch</code>, and write a test for that function
in a new file:</li>
</ul><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># file: test_message.py</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">from</span> message <span class="im">import</span> message</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">def</span> test_message():</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="cf">assert</span> message() <span class="op">==</span> <span class="st">"foo"</span></span></code></pre>
</div>
<ul><li>Check that the test passes, and commit it.</li>
<li>Push <code>my_branch</code> to GitHub with
<code>git push -u origin my_branch</code>, but don’t raise a pull
request yet.</li>
<li>Return to your <code>main</code> branch, and modify the function
being tested:</li>
</ul><div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># file: message.py</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="kw">def</span> message():</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">"bar"</span></span></code></pre>
</div>
<ul><li>Push the changes to <code>main</code>.</li>
<li>Now raise a pull request from <code>my_branch</code> into
<code>main</code>.</li>
</ul></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The code on the new branch will be testing the old implementation,
and should pass. However, following the merge, the test would fail. This
results in the <code>push</code> test passing, and the
<code>pull_request</code> test failing.</p>
<figure><img src="../fig/pull_request_test_failed.png" alt="Example of tests failing on pull requests." class="figure mx-auto d-block"><div class="figcaption">Example of tests failing on pull requests.</div>
</figure></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="keypoints">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a></h2>
<hr class="half-width"><p>So now, when you or your team want to make a feature or just update
the code, the workflow is as follows:</p>
<ul><li>Create a new branch for the feature</li>
<li>Write the code for the feature</li>
<li>Write tests for the feature</li>
<li>Push the code to GitHub</li>
<li>Create a Pull Request</li>
<li>Wait for the tests to pass or fail</li>
<li>If the tests pass, merge the code into the main branch or fix the
code if the tests fail</li>
</ul><p>This will greatly improve the quality of your code and make it easier
to collaborate with others.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>Continuous Integration (CI) is the practice of automating the
merging of code changes into a project.</li>
<li>GitHub Actions is a feature of GitHub that allows you to automate
the testing of your code.</li>
<li>GitHub Actions are defined in <code>yaml</code> files and are stored
in the <code>.github/workflows</code> directory in your repository.</li>
<li>You can use GitHub Actions to ensure your tests pass before merging
new code into your <code>main</code> branch.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/09-testing-output-files.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/09-testing-output-files.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Regression Tests
        </a>
        <a class="chapter-link float-end" href="../instructor/index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>Lesson developed by the <a href="https://researchcodingclub.github.io" class="external-link">University of York Research Coding Club</a></p>
        <p>Building on material from <a href="https://fair2-for-research-software.github.io" class="external-link">FAIR<sup>2</sup> for Research Software</a>, <a href="https://rse.shef.ac.uk" class="external-link">University of Sheffield RSE</a> &amp; <a href="https://www.sheffield.ac.uk/it-services/research" class="external-link">RIT</a></p>
        <p>

          <a href="https://github.com/ResearchCodingClub/python-testing-for-research/edit/main/episodes/10-CI.Rmd" class="external-link">Edit on GitHub</a>


        | <a href="https://github.com/ResearchCodingClub/python-testing-for-research/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/ResearchCodingClub/python-testing-for-research/" class="external-link">Source</a></p>
        <p>
        <a href="https://github.com/ResearchCodingClub/python-testing-for-research/blob/main/" class="external-link">Cite</a>
        | <a href="mailto:liam.pattinson@york.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
		</div>
		<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.18.5" class="external-link">sandpaper (0.18.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/ResearchCodingClub/uoy-varnish/tree/main" class="external-link">varnish (1.0.7)</a> [UoS fork]</p>
		</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://researchcodingclub.github.io/python-testing-for-research/instructor/10-CI.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries, Testing, FAIR4RS, Python, CI, Continuous Integration, Tests",
  "name": "Continuous Integration with GitHub Actions",
  "creativeWorkStatus": "active",
  "url": "https://researchcodingclub.github.io/python-testing-for-research/instructor/10-CI.html",
  "identifier": "https://researchcodingclub.github.io/python-testing-for-research/instructor/10-CI.html",
  "dateCreated": "2026-01-30",
  "dateModified": "2026-02-17",
  "datePublished": "2026-02-17"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

